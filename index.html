<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Floating UI - VR Experience</title>
  <style>
    body, html {
      margin: 0;
      padding: 0;
      height: 100%;
      overflow: hidden;
      display: flex;
      align-items: center;
      justify-content: center;
      background-color: #000;
      color: white;
      transform: rotate(90deg); /* Ensure it's landscape */
    }

    #floating-ui {
      position: absolute;
      width: 150px;
      height: 150px;
      background-color: rgba(0, 0, 255, 0.6);
      display: flex;
      align-items: center;
      justify-content: center;
      border-radius: 20px;
      font-size: 16px;
      text-align: center;
      color: white;
      transition: transform 0.1s ease-out;
    }

    #info {
      position: fixed;
      top: 20px;
      left: 20px;
      font-size: 24px;
      z-index: 10;
      background-color: rgba(0, 0, 0, 0.5);
      padding: 10px;
      border-radius: 5px;
    }
  </style>
</head>
<body>

  <div id="info">
    <p>Gamma (Z-axis rotation): <span id="gamma"></span></p>
    <p>Beta (X-axis rotation): <span id="beta"></span></p>
  </div>

  <div id="floating-ui">Floating UI</div>

  <script>
    const floatingUI = document.getElementById("floating-ui");
    const gammaElement = document.getElementById("gamma");
    const betaElement = document.getElementById("beta");

    // Default position: right-center
    let defaultX = window.innerWidth * 0.75;
    let defaultY = window.innerHeight / 2;

    // Margin limits to simulate small movements
    const marginLimit = 0.1; // Adjust this value to control how much margin you want to apply

    // Function to update the UI element's position based on head movement
    function updateUIPosition(gamma, beta) {
      // Calculate the movement offsets based on gamma (Z-axis) and beta (X-axis)
      const offsetX = (beta / 90) * window.innerWidth * marginLimit;  // Small horizontal movement based on Beta
      const offsetY = (gamma / 90) * window.innerHeight * marginLimit; // Small vertical movement based on Gamma

      // Debugging outputs to understand what's happening
      console.log('offsetX:', offsetX, 'offsetY:', offsetY);

      // Calculate new position for the UI element
      let newX = defaultX - offsetX; // If you tilt left, move the UI to the right
      let newY = defaultY - offsetY; // If you tilt up, move the UI down

      // Debugging outputs to ensure correct calculations
      console.log('newX:', newX, 'newY:', newY);

      // Prevent the UI from going out of bounds
      newX = Math.max(0, Math.min(newX, window.innerWidth - floatingUI.offsetWidth));
      newY = Math.max(0, Math.min(newY, window.innerHeight - floatingUI.offsetHeight));

      // Set new position of the floating UI element
      floatingUI.style.left = `${newX}px`;
      floatingUI.style.top = `${newY}px`;

      // Debugging output for position updates
      console.log('UI positioned at:', newX, newY);
    }

    // Listen for device orientation changes
    window.addEventListener('deviceorientation', function(event) {
      const gamma = event.gamma;  // Z-axis rotation (left-right tilt)
      const beta = event.beta;    // X-axis rotation (up-down tilt)

      // Update Gamma and Beta values on the UI
      gammaElement.textContent = gamma.toFixed(2);
      betaElement.textContent = beta.toFixed(2);

      // Update the floating UI position
      updateUIPosition(gamma, beta);
    });
  </script>

</body>
</html>
